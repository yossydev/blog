---
title: "WIP 'Introduce to React Compiler' blog."
description: "8/4ã®è‹¥æ‰‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢LT&äº¤æµä¼šã§ç™ºè¡¨ã—ãŸIntroduce to React Compilerã®æ—¥æœ¬èªãƒ–ãƒ­ã‚°ã§ã™ã€‚"
date: "2024/08/04"
published: false
---

## Intro

ã“ã®ãƒ–ãƒ­ã‚°ã¯8/4ã«è¡Œã‚ã‚ŒãŸ[è‹¥æ‰‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢LT & äº¤æµä¼š](https://devguil.connpass.com/event/321787/)ã¨ã„ã†ã‚¤ãƒ™ãƒ³ãƒˆã§ç™ºè¡¨ã—ãŸã€[Introduce to React Compiler]()ã¨ã„ã†è³‡æ–™ã®æ—¥æœ¬èªãƒ–ãƒ­ã‚°ã§ã™ã€‚
è³‡æ–™ã¯åŸºæœ¬è‹±èªãªã®ã§ã€ç¿»è¨³ã ã¨æ€ã£ã¦ã„ãŸã ã‘ã‚Œã°å¤§ä¸ˆå¤«ã§ã™ã€‚

å†…å®¹ã¨ã—ã¦ã¯ã–ã£ãã‚ŠReact Compilerã®èª¬æ˜ã‚’æ›¸ã„ã¦ã¾ã™ã€‚[Youtube](https://www.youtube.com/@yossydev)ã§[React Compiler Code Reading](https://www.youtube.com/watch?v=ZaZb1FhwdxQ&list=PLL3VHi3SOiPv4rpI3yC8tFPlOGukAOz7f)ã¨ã„ã†ã‚‚ã®ã‚‚ã‚„ã£ã¦ãŠã‚Šã€ã›ã£ã‹ããªã®ã§ãã“ã§è¦‹ãŸå®Ÿéš›ã®ã‚³ãƒ¼ãƒ‰ã‚‚è¦‹ãªãŒã‚‰ã“ã®ãƒ–ãƒ­ã‚°ã¯æ›¸ãã¾ã™ã€‚

## è©±ã•ãªã„ã“ã¨

ä»Šå›ã¯ä»¥ä¸‹ã®ã“ã¨ã«ã¤ã„ã¦ã¯è©±ã•ãªã„ã§ã™ã€‚

- ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãã®ã‚‚ã®ã«ã¤ã„ã¦ã®èª¬æ˜
- React Compilerã®ã‚³ãƒ¼ãƒ‰ã®å…·ä½“çš„ãªè©±
- Reactã®ãƒ¡ãƒ¢åŒ–ã«ã¤ã„ã¦
- Reactã®APIã®èª¬æ˜

ã‚ã¨è³‡æ–™ã®ä¸­ã§ã¯è‡ªå·±ç´¹ä»‹ã‚‚å…¥ã£ã¦ã„ã¾ã™ãŒã€ã“ã®ãƒ–ãƒ­ã‚°ã§ã¯æ›¸ã‹ãªã„ã§ã™ã€‚

## React Compilerã¨ã¯

> React Compiler is a compiler that optimizes React applications, ensuring that only the minimal parts of components and hooks will re-render when state changes. The compiler also validates that components and hooks follow the Rules of React.
>
> ref: [https://github.com/facebook/react/tree/main/compiler#react-compiler](https://github.com/facebook/react/tree/main/compiler#react-compiler)

æ—¥æœ¬èªã«è¨³ã—ã¦èª¬æ˜ã‚’ã™ã‚‹ã¨ã€ã¤ã¾ã‚ŠReact Compilerã¨ã¯ã€**Reactã‚¢ãƒ—ãƒªã®æœ€é©åŒ–ã‚’è¡Œã†ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©**ã®ã“ã¨ã‚’æŒ‡ã—ã¾ã™ã€‚

çš†ã•ã‚“ã¯ã“ã‚Œã¾ã§Reactã‚¢ãƒ—ãƒªã®æœ€é©åŒ–ã‚’è¡Œã†éš›ã«ã€

- [useMemo](https://react.dev/reference/react/useMemo)
- [useCallback](https://react.dev/reference/react/useCallback)
- [React.memo](https://react.dev/reference/react/memo)

ã®ã‚ˆã†ãªReactãŒæä¾›ã—ã¦ã„ã‚‹ãƒ¡ãƒ¢åŒ–é–¢æ•°ã‚’ä½¿ã£ã¦æ‰‹å‹•ã§æœ€é©åŒ–ã‚’è¡Œã£ã¦ããŸã¨æ€ã„ã¾ã™ã€‚React Compilerã‚’ä½¿ãˆã°ã€è‡ªå‹•ã§æœ€é©åŒ–ã‚’è¡Œã£ã¦ãã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹ãŸã‚ã€é–‹ç™ºè€…ã«ã‚ˆã‚‹ãƒ¡ãƒ¢åŒ–ã¯ä¸è¦ã«ãªã‚Šã¾ã™ã€‚ãã—ã¦ã“ã‚Œã¯React19ã§ã‚„ã£ã¦ã‚„ã£ã¦ãã¾ã™ï¼

## Reactã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®ç‰¹å¾´

Reactã¯åŸºæœ¬çš„ã«ã¯å…¨ã¦å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹ã‚ˆã†ãªä»•çµ„ã¿ã«ãªã£ã¦ã„ã¾ã™ã€‚**Reactã¯**ã¨è¨€ã£ã¦ã„ã‚‹ã®ã¯ã€SolidJSãªã©ã®ä»–ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã¯å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’è¡Œã†ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’é–‹ç™ºè€…ãŒåˆ¶å¾¡ã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚
Reactã§ã¯ãã‚ŒãŒåå¯¾ã§ã€å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ãªã„ã‚ˆã†ã«åˆ¶å¾¡ã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚ãã®ãŸã‚æ›´æ–°ã—ãŸã‹ã©ã†ã‹ã‚’åˆ¤æ–­ã™ã‚‹å¿…è¦ãŒãªãã€åŸºæœ¬çš„ã«ã¯å¸¸ã«æœ€æ–°ã®ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

React CompilerãŒã“ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ç™»å ´ã—ãŸèƒŒæ™¯ã¨ã—ã¦ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã®å¿…è¦æ€§ã‚’èªè­˜ã™ã‚‹ã®ãŒãã‚‚ãã‚‚å¾Œã«ãªã‚Šã€ã•ã‚‰ã«å®Ÿéš›ã«ä½œã‚‹ã®ã«ã‚‚æ™‚é–“ãŒã‹ã‹ã£ãŸãã†ã§ã™ã€‚

## React Compilerã‚’å…¥ã‚Œã‚‹ã“ã¨ã§å¬‰ã—ã„ã“ã¨

**React Compilerã¯Reactã‚¢ãƒ—ãƒªã®æœ€é©åŒ–ã‚’è‡ªå‹•ã§è¡Œã£ã¦ãã‚Œã‚‹ã‚‚ã®**ã¨ã„ã†ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚
ã§ã¯æ¬¡ã«ã€å®Ÿéš›ã«React Compilerã‚’å…¥ã‚Œã‚‹ã“ã¨ã§æˆ‘ã€…é–‹ç™ºè€…ã¯ã©ã‚“ãªã“ã¨ãŒå¬‰ã—ã„ã®ã§ã—ã‚‡ã†ã‹ã€‚ç­†è€…ã¯äºŒã¤ãƒã‚¤ãƒ³ãƒˆãŒã‚ã‚‹ã¨æ€ã£ã¦ã„ã¾ã™ã€‚

- æ‰‹å‹•ãƒ¡ãƒ¢åŒ–ã‹ã‚‰ã®è§£æ”¾
- ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãƒã‚§ãƒƒã‚¯ã«ã‚ˆã‚‹ã‚³ãƒ¼ãƒ‰ã®å“è³ªæ‹…ä¿

ãã‚Œãã‚Œè¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

### æ‰‹å‹•ãƒ¡ãƒ¢åŒ–ã‹ã‚‰ã®è§£æ”¾ 

å½“ç„¶ã§ã™ãŒè‡ªå‹•ã®ãƒ¡ãƒ¢åŒ–ãŒãƒ¡ãƒªãƒƒãƒˆã§ã™ã€‚

```tsx
import { useState } from 'react';

export default function MyApp() {
  const [name, setName] = useState('');
  const [address, setAddress] = useState('');

  const handleSubmit = (orderDetails) => {
    setAddress("122-2222")
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  };j

  const visibleTodos = () => filterTodos(todos, tab);

  return (
    <>
      <p>{address}</p>
      <Greeting name={"Yuto"} />
      <button onClick={visibleTodos}>Click!!</button>
      <button onClick={handleSubmit}>Click!!</button>
    </>
  );
}

function Greeting({ name }) {
  console.log("Greeting was rendered at", new Date().toLocaleTimeString());
  return <h3>Hello{name && ', '}{name}!</h3>;
};
```

ã“ã¡ã‚‰ã¯useMemo/useCallback/React.memoã‚’ãã‚Œãã‚Œä½¿ã£ãŸã¿ãŸã‚³ãƒ¼ãƒ‰ã«ãªã‚Šã¾ã™ï¼ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‹ã‚‰å¼•ã£å¼µã£ã¦ããŸã®ã§ã€è‹¥å¹²éç¾å®Ÿçš„ãªã‚³ãƒ¼ãƒ‰ã«ã¯ãªã£ã¦ã„ã¾ã™ğŸ™ï¼‰
ã“ã‚Œã‹ã‚‰ã®Reactã§ã¯ã“ã®ãƒ¡ãƒ¢åŒ–é–¢æ•°ã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ã¯ãªããªã‚Šã¾ã™ã€‚

ãã—ã¦æ¬¡ã«ã€React Compilerã‚’ä½¿ã£ã¦ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ãŸçµæœã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```ts
function MyApp() {
  const $ = _c(8);
  useState("");
  const [address, setAddress] = useState("");
  let t0;
  if ($[0] === Symbol.for("react.memo_cache_sentinel")) {
    t0 = (orderDetails) => {
      setAddress("122-2222");
      post("/product/" + productId + "/buy", {
        referrer,
        orderDetails,
      });
    };
    $[0] = t0;
  } else {
    t0 = $[0];
  }
  const handleSubmit = t0;
  const visibleTodos = _temp;
  let t1;
  if ($[1] !== address) {
    t1 = <p>{address}</p>;
    $[1] = address;
    $[2] = t1;
  } else {
    t1 = $[2];
  }
  let t2;
  let t3;
  let t4;
  if ($[3] === Symbol.for("react.memo_cache_sentinel")) {
    t2 = <Greeting name="Yuto" />;
    t3 = <button onClick={visibleTodos}>Click!!</button>;
    t4 = <button onClick={handleSubmit}>Click!!</button>;
    $[3] = t2;
    $[4] = t3;
    $[5] = t4;
  } else {
    t2 = $[3];
    t3 = $[4];
    t4 = $[5];
  }
  let t5;
  if ($[6] !== t1) {
    t5 = (
      <>
        {t1}
        {t2}
        {t3}
        {t4}
      </>
    );
    $[6] = t1;
    $[7] = t5;
  } else {
    t5 = $[7];
  }
  return t5;
}
function Greeting(t0) {
  const $ = _c(3);
  const { name } = t0;
  console.log("Greeting was rendered at", new Date().toLocaleTimeString());
  const t1 = name && ", ";
  let t2;
  if ($[0] !== t1 || $[1] !== name) {
    t2 = (
      <h3>
        Hello{t1}
        {name}!
      </h3>
    );
    $[0] = t1;
    $[1] = name;
    $[2] = t2;
  } else {
    t2 = $[2];
  }
  return t2;
}
function _temp() {
  return filterTodos(todos, tab);
}
```

`c`ã¨ã„ã†å¼•æ•°ã®æ•°å­—åˆ†ã®é…åˆ—ã‚’ä½œæˆã—ã€æ¡ä»¶åˆ†å²ã§ãã®ä¸­ã«å€¤ã‚„jsxã‚’æ ¼ç´ã—ã¦ã„ã£ã¦ã„ã¾ã™ã€‚

ï¼ˆcã«ã¤ã„ã¦ã¯ä»¥å‰ç­†è€…ãŒãƒ–ãƒ­ã‚°æ›¸ã„ãŸã®ã§ãœã²ãã¡ã‚‰ã‚’ã”è¦§ãã ã•ã„ã€‚[React Compilerã§å‡ºåŠ›ã•ã‚Œã‚‹c(number)ã«ã¤ã„ã¦](https://zenn.dev/yuto76/articles/d2cbd4d61f7a3a)ï¼‰

ç­†è€…ã¨ã—ã¦ã¯**ãƒ¡ãƒ¢åŒ–ã™ã‚‹ã—ãªã„ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒæ¸›ã‚‹**ã“ã¨ã‚‚è‰¯ã„ã¨æ€ã£ã¦ã„ã¾ã™ã€‚
ã‚ˆãè¨˜äº‹ã§ã‚‚ã€Œã“ã†ã„ã£ãŸã‚±ãƒ¼ã‚¹ã¯ãƒ¡ãƒ¢åŒ–ã—ãŸæ–¹ãŒè‰¯ã„ã€ã€Œãƒ¡ãƒ¢åŒ–ã¯å…¨éƒ¨ã¯ã—ãªã„ã»ã†ãŒè‰¯ã„ã€ã¨ã„ã†ã‚ˆã†ãªè¨˜äº‹ãŒå®šæœŸçš„ã«å‡ºã¦ã„ãŸã‚Šã€æ¥­å‹™ã®ä¸­ã§ã‚‚ã€Œã“ã‚Œã¯ã€‡ã€‡ã ã‹ã‚‰ãƒ¡ãƒ¢åŒ–ã¯é€†ã«ã—ãªã„ã»ã†ãŒè‰¯ã„ã®ã§ã¯ã€ã¨ã„ã£ãŸãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ã‚‚ã‚‰ã£ãŸé–‹ç™ºè€…ã®æ–¹ã¯å¤šã„ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚ç­†è€…ã‚‚ä½•åº¦ã‹ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ã‚‚ã‚‰ã£ãŸã“ã¨ãŒã‚ã‚Šã¾ã™ãŒã€æ­£ç›´ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œã‚‹ä¸Šã§ãƒ¡ãƒ¢åŒ–ã™ã‚‹ã—ãªã„ã®åˆ¤æ–­ã‚’ã™ã‚‹ã®ã¯é›£ã—ã„ã¨æ€ã£ã¦ã„ãŸã®ã§ã€è‡ªå‹•ãƒ¡ãƒ¢åŒ–ã®æ©æµã¯ã“ã†ã„ã£ãŸéƒ¨åˆ†ã§ã‚‚å½¹ã«ç«‹ã¤ã¨æ€ã£ã¦ã„ã¾ã™ã€‚

### ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãƒã‚§ãƒƒã‚¯ã«ã‚ˆã‚‹ã‚³ãƒ¼ãƒ‰ã®å“è³ªæ‹…ä¿ 

React Compilerã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§æ„å‘³è§£æãŒå¯èƒ½ã«ãªã‚Šã€ã“ã‚Œã«ã‚ˆã‚Šæ„å›³ã—ã¦ãªã„/è¨±å¯ã—ã¦ã„ãªã„ã‚³ãƒ¼ãƒ‰ãŒã‚ã‚Œã°ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŒå¤±æ•—ã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

ä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã¯ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã¨ãªã‚Šã¾ã™ã€‚

```tsx
// ref: https://github.com/facebook/react/blob/main/compiler/packages/babel-plugin-react-compiler/src/__tests__/fixtures/compiler/error.invalid-mutate-props-via-for-of-iterator.expect.md
function Component(props) {
  const items = [];
  for (const x of props.items) {
    x.modified = true; // InvalidReact
    items.push(x);
  }
  return items;
}
```

ãœã²ã“ã®ã‚³ãƒ¼ãƒ‰ã‚’[Playground](https://playground.react.dev/#N4Igzg9grgTgxgUxALhAMygOzgFwJYSYAEAwhALYAOhCmOAFJTBJWAJRHAA6xRchYHETw4E5MEQC8RANoBdANw8iRNBBhF6-TIKIAPIhDREmLMADoRY9p2Ur958hAAmeNHgTOpRHDCgIlXhUrcXNKKDAAC3o9NkCVAF87GAQcWGIQsECEkASgA)ã§è©¦ã—ã¦ã¿ã¦ãã ã•ã„ã€‚`InvalidReact: Mutating component props or hook arguments is not allowed. Consider using a local variable instead`ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã¯ãšã§ã™ã€‚ã—ã‹ã—ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ä»Šã¾ã§ã¯ç‰¹ã«å•é¡Œãªããƒ–ãƒ©ã‚¦ã‚¶ã§ã‚‚å‹•ä½œã—ã¾ã—ãŸã€‚

React Compilerã‚’ä½¿ã†ã“ã¨ã§ã€ã“ã®ã‚ˆã†ã«äº‹å‰ã«å®‰å…¨ã§ã¯ãªã„ã€æ„å›³ã—ã¦ã„ãªã„ã‚³ãƒ¼ãƒ‰ã‚’æ¤œçŸ¥ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã¡ãªã¿ã«ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã§ã¯ãªãç·¨é›†ä¸­ã«ã‚¨ãƒ©ãƒ¼ã‚’çŸ¥ã‚ŠãŸã„ï¼ã¨ã„ã†æ–¹ã«ã¯ã€[eslint-plugin-react-compiler](https://github.com/facebook/react/tree/main/compiler/packages/eslint-plugin-react-compiler)ã¨ã„ã†ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã‚’ä½¿ãˆã°React Compilerã«ã‚ˆã£ã¦æ¤œå‡ºã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼ã‚’lintã¨ã—ã¦ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚React Compilerã‚’ä½¿ã†ã®ã§ã‚ã‚Œã°ã€ä¸€ç·’ã«å…¥ã‚Œã¦ãŠãã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚

## React Compilerã®HIRã«ã¤ã„ã¦

React Compilerã®ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚“ã§ã„ã‚‹ã¨ã€HIRï¼ˆHigh-level Intermediate Representationï¼‰ã¨ã„ã†æ¦‚å¿µãŒç™»å ´ã—ã¾ã™ã€‚ã“ã“ã§ã¯ã€HIRã«ã¤ã„ã¦ç°¡å˜ã«èª¬æ˜ã—ã¾ã™ã€‚ï¼ˆæœ¬æ¥ã¯ã“ã“ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã®æµã‚Œã‚’æ›¸ããŸã‹ã£ãŸã‚“ã§ã™ãŒå…¨ä½“åƒã¾ã è¿½ãˆã¦ã„ãªã„ã®ã§åˆ¥ã®æ©Ÿä¼šã«ğŸ™ï¼‰

### HIRã¨ã¯

HIRã¯ã€é«˜ãƒ¬ãƒ™ãƒ«ãªã‚³ãƒ¼ãƒ‰æ§‹é€ ã‚’ä¿æŒã—ã¤ã¤ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒæ‰±ã„ã‚„ã™ã„å½¢å¼ã«å¤‰æ›ã—ãŸã‚‚ã®ã§ã™ã€‚ã“ã‚Œã¯[Rust Compiler Development Guide](https://rustc-dev-guide.rust-lang.org/hir.html)ã‹ã‚‰å½±éŸ¿ã‚’å—ã‘ã¦ã„ã¾ã™ã€‚

HIRã¯React Compilerã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ç”Ÿæˆã•ã‚Œã¾ã™ã€‚

1. Babelã‚’ä½¿ã£ã¦ã‚³ãƒ¼ãƒ‰ã‚’ãƒ‘ãƒ¼ã‚¹
2. ASTã‚’ç”Ÿæˆ
3. ASTã‚’loweringï¼ˆä½ãƒ¬ãƒ™ãƒ«åŒ–ï¼‰ã—ã¦HIRã‚’ä½œæˆ

### ãªãœHIRãªã®ã‹

ãã—ã¦ã“ã®HIRã‚’ä½¿ã†ã“ã¨ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šã¾ã™ã€‚

> High-level code is more compact, and helps reduce the impact of compilation on application size
> 
> High-level constructs that match what the developer wrote are easier to debug

æ—¥æœ¬èªã«è¨³ã™ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

- é«˜ãƒ¬ãƒ™ãƒ«ãªã‚³ãƒ¼ãƒ‰æ§‹é€ ã‚’ç¶­æŒã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å¾Œã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µã‚¤ã‚ºã¸ã®å½±éŸ¿ã‚’æœ€å°é™ã«æŠ‘ãˆã‚‹
- é–‹ç™ºè€…ãŒæ›¸ã„ãŸã‚³ãƒ¼ãƒ‰ã®æ§‹é€ ã«è¿‘ã„å½¢ã‚’ä¿æŒã™ã‚‹ãŸã‚ã€ãƒ‡ãƒãƒƒã‚°ãŒå®¹æ˜“ã«ãªã‚‹

ä¾‹ãˆã°JavaScriptã®æ§‹æ–‡ã«è«–ç†å¼ã¨ã„ã†ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚

```js
(a ?? b)
```

ã“ã‚Œã¯å½¹å‰²çš„ã«ã¯**aãŒnullabeã ã£ãŸå ´åˆbã‚’ä½¿ç”¨ã™ã‚‹**ã¨ã„ã†ifåˆ†çš„å½¹å‰²ã‚’æœãŸã™ã®ã§ifåˆ†ã«ãªã‚‹ã‚“ã§ã™ãŒã€React Compilerã§ã¯å…ˆã»ã©ã®äºŒã¤ã®ç†ç”±ã«ã‚ˆã£ã¦ã“ã®è«–ç†å¼ã®ã¾ã¾æ‰±ã„ãŸã„ã€ãã®ãŸã‚ã«HIRã‚’ä½¿ã£ãŸã¨è¨€ã†ã“ã¨ã‚‰ã—ã„ã§ã™ï¼ˆå³å¯†ã«ã¯ã‚‚ã£ã¨ç†ç”±ã¯ã‚ã‚‹ã¨æ€ã„ã¾ã™ãŒğŸ‘€ï¼‰

ã¾ã¨ã‚ã‚‹ã¨ã€HIRã¯ã€æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ã«è¿‘ã„çŠ¶æ…‹ï¼ˆé«˜ãƒ¬ãƒ™ãƒ«ãªçŠ¶æ…‹ï¼‰ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒæ‰±ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ã‚‚ã®ã€‚ãã—ã¦React Compilerã§ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å¾Œã®å½±éŸ¿ã‚’æœ€ä½é™ã«ã€ãƒ‡ãƒãƒƒã‚°ã®å®¹æ˜“ã•ã€ã¨ã„ã†äºŒã¤ã®ãƒã‚¤ãƒ³ãƒˆã‹ã‚‰HIRã‚’æ¡ç”¨ã—ãŸã¨ã„ã“ã¨ã§ã™ã€‚é¢ç™½ã„ã§ã™ã­ã€‚

## ã¾ã¨ã‚

React 19ã¯ä¹…ã—ã¶ã‚Šã®Reactã®ãƒ¡ã‚¸ãƒ£ãƒ¼ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã«ãªã‚Šã¾ã™ã€‚React CompilerãŒå…¥ã‚‹ã“ã¨ã§å®Ÿéš›ã«ã©ã®ã‚ˆã†ãªä½“é¨“ã‚’é–‹ç™ºè€…ãŒå¾—ã‚‰ã‚Œã‚‹ã®ã‹ã¨ã¦ã‚‚æ¥½ã—ã¿ã§ã™ã€‚

æœ€å¾Œã«å®£ä¼ã«ã¯ãªã‚Šã¾ã™ãŒã€[React Comiler Code Reading](https://youtube.com/playlist?list=PLL3VHi3SOiPv4rpI3yC8tFPlOGukAOz7f&si=lj58LL0TZIZKg77c)ã¨ã„ã†Youtubeã§Compilerã®ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚€ä¼šã‚’ã—ã¦ã„ã‚‹ã®ã§ã€æ°—ã«ãªã£ãŸæ–¹ã‚„ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã«ã¤ã„ã¦ç†è§£ã‚’æ·±ã‚ãŸã„æ–¹ã¯ãœã²è¦‹ã¦ã¿ã¦ãã ã•ã„ğŸ«£

## é–¢é€£

- [React Compiler Doc](https://react.dev/learn/react-compiler)
- [react/compiler at main Â· facebook/react](https://github.com/facebook/react/tree/main/compiler)
- [Introducing React Compiler Â· reactwg react-compiler Â· Discussion \#5](https://github.com/reactwg/react-compiler/discussions/5)
- [Rust Compiler Development Guide](https://rustc-dev-guide.rust-lang.org/hir.html)
