---
title: "HonoXã§ãƒ–ãƒ­ã‚°ã‚’ä½œã‚Šç›´ã—ãŸã€‚ãã—ã¦ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚‚ä½œã£ãŸ"
description: "HonoXã§ãƒ–ãƒ­ã‚°ã‚’ä½œã‚Šç›´ã—ã¾ã—ãŸã€‚é–‹ç™ºä½“é¨“ãŒã¨ã¦ã‚‚è‰¯ã‹ã£ãŸã®ã§ã€ä½¿ã£ã¦ã¿ãŸã„ã‘ã©æ‰‹ãŒå‡ºã›ã¦ãªã„æ–¹å‘ã‘ã«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œã‚Šã¾ã—ãŸã€‚"
date: "2024/03/07"
published: true
---

# HonoXã§ãƒ–ãƒ­ã‚°ã‚’ä½œã‚Šç›´ã—ãŸã€‚ãã—ã¦ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚‚ä½œã£ãŸ

## Intro

ä»Šå›è‡ªåˆ†ã®ãƒ–ãƒ­ã‚°ã‚’Next.jsã‹ã‚‰HonoXã«æ›¸ãæ›ãˆã‚’ã—ã¾ã—ãŸã€‚ã‚ã‚“ã¾ã‚Šã¾ã ä½¿ã£ã¦ã‚‹äººã„ãªã„ã¨æ€ã†ã®ã§ã€ä»Šå¾Œä½¿ã£ã¦ã¿ãŸã„å‘ã‘ã«ãƒ–ãƒ­ã‚°ã¨ã—ã¦æ®‹ã—ã¦ãŠãã¾ã™ã€‚

## honox-blog-templeteã‚’ä½œã£ãŸ

æœ€åˆã«ä»Šå¾ŒHonoXã‚’ä½¿ã£ã¦ã„ããŸã„æ–¹å‘ã‘ã«[honox-blog-templete](https://github.com/yossydev/honox-blog-templete)ã¨ã„ã†ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œã‚Šã¾ã—ãŸã€‚

åŸºæœ¬çš„ã«ã¯[yusukebe](https://github.com/yusukebe)ã•ã‚“ã®[honox mdx exmaple](https://github.com/yusukebe/honox-examples/tree/main/projects/mdx)ã§äº‹è¶³ã‚Šã‚‹ã®ã§ã™ãŒã€æŠ€è¡“ãƒ–ãƒ­ã‚°ã‚’æ›¸ããŸã„äººã¯ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆã®è¨­å®šã‚’ã—ãŸã‚Šã€ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ã®è¨­å®šãªã©è‰²ã€…ã™ã‚‹ã“ã¨ã‚‚ã‚ã‚‹ã‹ã¨æ€ã†ã®ã§ã€ãã®è¾ºã‚Šã‚’è¨­å®šã—ã¦ãŠãã¾ã—ãŸï¼
ã‚µã‚¯ãƒƒã¨ãƒ–ãƒ­ã‚°ã‚’ä½œã‚ŠãŸã„æ–¹ã¯ä½¿ã£ã¦ã¿ã¦ãã ã•ã„ï¼

```bash
$ npm run create:post
```

ã‚’å®Ÿè¡Œã™ã‚‹ã¨å¯¾è©±å½¢å¼ã§ãƒ–ãƒ­ã‚°ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œã‚Œã¾ã™ï¼ã‚ã¨ã¯ãƒ–ãƒ­ã‚°ã‚’æ›¸ã„ã¦ã€Cloudflare pagesãªã‚Šã«ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ã™ã‚‹ã¨å®Œæˆã§ã™ï¼UIã¯ãŠå¥½ã¿ã§ã©ã†ãï¼

## æ„Ÿæƒ³

### 1. mdxãŒãã®ã¾ã¾ä½¿ãˆã‚‹ã®ã‚ã‚ŠãŒãŸã„

[https://github.com/honojs/honox?tab=readme-ov-file#mdx](https://github.com/honojs/honox?tab=readme-ov-file#mdx)ã«æ›¸ã„ã¦ã‚ã‚‹å†…å®¹ã§ã™ã€‚

è‡ªåˆ†ã®å ´åˆã¯`/app/posts`é…ä¸‹ã«mdxãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãŠã„ã¦ã„ã‚‹ã‚“ã§ã™ãŒã€ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã¨htmlãƒ•ã‚¡ã‚¤ãƒ«ã«å¤‰æ›ã•ã‚Œã‚‹ã®ã§ã€ãã®ã¾ã¾ãƒ–ãƒ©ã‚¦ã‚¶ã«è¡¨ç¤ºã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚è¿½åŠ ã®è¨­å®šã‚‚ã»ã¼ã„ã‚‰ãªã„ã®ã§ã€ã³ã£ãã‚Šã™ã‚‹ã»ã©ç°¡å˜ã§ã—ãŸã€‚


### 2. HooksãŒä½¿ãˆã‚‹ã®ã‚ã‚ŠãŒãŸã„

hono/jsxãŒReactã¨äº’æ›æ€§ãŒã‚ã‚‹ãŸã‚ã€Hooksã‚’ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚([https://hono.dev/guides/jsx-dom#hooks-compatible-with-react](https://hono.dev/guides/jsx-dom#hooks-compatible-with-react))

ãã®ãŸã‚ã€ä»Šå›éš ã‚ŒãŸè¿½åŠ æ©Ÿèƒ½ã¨ã—ã¦ã„ã„ã­æ©Ÿèƒ½ã‚’è¿½åŠ ã—ãŸã‚“ã§ã™ãŒã€ã“ã‚Œã«debounceæ©Ÿèƒ½ã‚’ç”¨ã„ã‚‹éš›ã«[zenn](https://zenn.dev/luvmini511/articles/4924cc4cf19bc9)ã«ã‚ã£ãŸå‚è€ƒã®hooksã‚’ãã®ã¾ã¾ä½¿ã†ã“ã¨ãŒã§ãã€ã¨ã¦ã‚‚æ¥½ã§ã—ãŸã€‚


```ts
import { useEffect, useState } from "hono/jsx";

export function useDebounce(value: number, delay: number) {
  const [debouncedValue, setDebouncedValue] = useState(value);

  useEffect(() => {
    const timer = setTimeout(() => {
      setDebouncedValue(value);
    }, delay);
    return () => {
      clearTimeout(timer);
    };
  }, [value, delay]);

  return debouncedValue;
}
```

### 3. CIçµ„ã‚“ã§prã”ã¨ã«previewã«ã‚‚å‡ºã›ã‚‹ã‚ˆã†ã«ã§ããŸ

è‡ªåˆ†ã¯æ›¸ã„ãŸãƒ–ãƒ­ã‚°ã”ã¨ã«PRã‚’å‡ºã™ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚ãã†ã™ã‚‹ã¨Vercelã ã¨previewç’°å¢ƒã‚’ç”¨æ„ã—ã¦ãã‚Œã‚‹ãŸã‚ã§ã™ã€‚æ›¸ã„ãŸãƒ–ãƒ­ã‚°ã®ãƒã‚§ãƒƒã‚¯ã§ã€æœ€çµ‚ç¢ºèªã‚’è¡Œã„ãŸã„æ™‚ã«ã¿ã¾ã™ã€‚

ã“ã®ä½“é¨“ã¯æã­ãŸããªã‹ã£ãŸã®ã§ã€Cloudflare pagesã§ã‚‚åŒã˜ã“ã¨ã—ãŸã„ã¨æ€ã„èª¿ã¹ãŸã¨ã“ã‚ã€[cloudflare/pages-action@v1](https://github.com/cloudflare/pages-action)ã‚’ä½¿ã†ã“ã¨ã§ã¨ã¦ã‚‚ç°¡å˜ã«å®Ÿç¾ã§ãã¾ã—ãŸã€‚

[GitHub Actionsã§ãƒ“ãƒ«ãƒ‰ã—ã¦Cloudflare Pagesã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹](https://zenn.dev/nwtgck/articles/1fdee0e84e5808) â† ã“ã®ãƒ–ãƒ­ã‚°ãŒã¨ã¦ã‚‚å‚è€ƒã«ãªã‚Šã¾ã—ãŸï¼[pull_request.yml](https://github.com/yossydev/blog/blob/main/.github/workflows/pull_request.yml)ã«ã‚³ãƒ¼ãƒ‰ãŒã‚ã‚‹ã®ã§å‚è€ƒã«ã—ã¦ã¿ã¦ãã ã•ã„ãƒ¼ï¼


### 3. Islandã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒ_renderer.tsxã§ä½¿ã†ã¨scriptãŒèª­ã¿è¾¼ã¾ã‚Œãªã„

ä»Šå›[ã„ã„ã­æ©Ÿèƒ½](https://github.com/yossydev/blog/blob/main/app/islands/LikeButton.tsx)ã¨[Xã¸ã®ã‚·ã‚§ã‚¢ã¨ãƒ•ã‚©ãƒ­ãƒ¼ã®ãƒœã‚¿ãƒ³](https://github.com/yossydev/blog/blob/main/app/islands/SnsButton.tsx)ã¯islandé…ä¸‹ã«ç½®ã„ã¦ã€å…¨ã¦ã®ãƒ–ãƒ­ã‚°ãƒšãƒ¼ã‚¸ä¸‹éƒ¨ã§è¡¨ç¤ºã•ã›ã‚‹ãŸã‚ã«`_renderer.tsx`é…ä¸‹ã«ç½®ã„ã¦ã„ã¾ã™ã€‚

ã“ã®å ´åˆè¡¨ç¤ºã¯ã•ã‚Œã‚‹ã‚“ã§ã™ãŒã€[honox/serverã®Scirptã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ](https://github.com/honojs/honox/blob/main/src/server/components/script.tsx)ã§ã¯ä½¿ç”¨ä¸Š`HasIsland`ãŒtrueã«ãªã£ãŸå ´åˆã«æœ¬ç•ªç’°å¢ƒã§scirptãŒèª­ã¿è¾¼ã¾ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹ä»•æ§˜ã«ãªã£ã¦ã„ã‚‹ã¿ãŸã„ã§ã—ãŸã€‚

```tsx
export const Script: FC<Options> = async (options) => {
  const src = options.src
  if (options.prod ?? import.meta.env.PROD) {
    let manifest: Manifest | undefined = options.manifest
    if (!manifest) {
      const MANIFEST = import.meta.glob<{ default: Manifest }>('/dist/.vite/manifest.json', {
        eager: true,
      })
      for (const [, manifestFile] of Object.entries(MANIFEST)) {
        if (manifestFile['default']) {
          manifest = manifestFile['default']
          break
        }
      }
    }
    if (manifest) {
      const scriptInManifest = manifest[src.replace(/^\//, '')]
      if (scriptInManifest) {
        return (
          <HasIslands>
            <script
              type='module'
              async={!!options.async}
              src={`/${scriptInManifest.file}`}
            ></script>
          </HasIslands>
        )
      }
    }
    return <></>
  } else {
    return <script type='module' async={!!options.async} src={src}></script>
  }
}
```

scriptãŒèª­ã¿è¾¼ã¾ã‚Œãªã„ã®ã§ã€ã‚¤ãƒ³ã‚¿ã‚¯ã‚·ãƒ§ãƒ³ãŒç™ºç”Ÿã—ã¦ã‚‚ä½•ã‚‚èµ·ããªã„çŠ¶æ…‹ãŒç™ºç”Ÿã—ã¾ã›ã‚“ã€‚
ãã®ãŸã‚ã€`<HasIslands>`ã§å›²ã¾ãªã„ã‚ˆã†ã«ã—ãŸ[Scriptã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ](https://github.com/yossydev/blog/blob/main/app/libs/honox/Script.tsx)ã‚’è‡ªåˆ†ã®æ–¹ã§ç”¨æ„ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚
ãŸã çµ¶å¯¾ã“ã®æ–¹æ³•è‰¯ããªã„ã¨æ€ã†ã®ã§ã€ãªã‚“ã‹ã„ã„æ–¹æ³•ã‚ã‚Œã°æ•™ãˆã¦ã„ãŸã ããŸã„ã§ã™ğŸ™‡â€â™‚ï¸

[https://twitter.com/yusukebe/status/1765727221526983014](https://twitter.com/yusukebe/status/1765727221526983014) â† Xã§[yusukebe](https://github.com/yusukebe)ã•ã‚“ã«ãŠèãã—ãŸã¨ã“ã‚ç›´ã—ã¦ã„ã„ã¨ã®ã“ã¨ãªã®ã§ã€ä»Šé ‘å¼µã£ã¦é–‹ç™ºã—ã¦ã„ã¾ã™ã€‚ã¾ãŸé€²æ—ãŒã‚ã‚Œã°å…±æœ‰ã—ã¾ã™ã€‚

## ã¾ã¨ã‚

å€‹äººçš„ã«ã¯é–‹ç™ºä½“é¨“è‰¯ãã¦ã€Cloudflare pagesã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚‚çˆ†é€Ÿã ã£ãŸã®ã§æµè¡Œã£ã¦æ¬²ã—ã„ãªã¨æ€ã„ã¾ã™ï¼
ã‚ã¨ä»Šå›npmä½¿ã£ãŸã‘ã©bunã«ã—ã¦ã¿ãŸã„ã—ã€ã‚‚ã†ã¡ã‚‡ã£ã¨islandã®æ©æµã‚’æ„Ÿã˜ã‚‰ã‚Œã‚‹ã‚ˆã†ãªã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³å¤šã‚ã®ã‚¢ãƒ—ãƒªã§ã‚‚æ¡ç”¨ã—ã¦ã¿ãŸã„ã§ã™ï¼

ãœã²çš†ã•ã‚“ã‚‚HonoXä½¿ã£ã¦ã¿ã¦ãã ã•ã„ãƒ¼ï¼ï¼ğŸ”¥
