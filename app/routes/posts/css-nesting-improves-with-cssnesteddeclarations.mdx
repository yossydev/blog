---
title: "Chrome 130ã§ã®CSSãƒã‚¹ãƒ†ã‚£ãƒ³ã‚°æ”¹å–„: CSSNestedDeclarationsã®è©³ç´°"
description: "web.devãŒå…ˆæ—¥ã€CSS nesting improves with CSSNestedDeclarationsã¨ã„ã†ãƒ–ãƒ­ã‚°ã‚’å…¬é–‹ã—ã¾ã—ãŸã€‚ã“ã®ãƒ–ãƒ­ã‚°ã§ã¯ã€CSSãƒã‚¹ãƒ†ã‚£ãƒ³ã‚°ã®ä»•æ§˜ã«CSSNestedDeclarationsãŒè¿½åŠ ã•ã‚ŒãŸã“ã¨ã«ã¤ã„ã¦æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚å°å…¥èƒŒæ™¯ã‚„CSSOMã®å‹•ããªã©ãŒå°‘ã—é¢ç™½ã‹ã£ãŸã®ã§ãƒ–ãƒ­ã‚°ã«ã¾ã¨ã‚ã¾ã—ãŸã€‚"
date: "2024/10/13"
published: true
---

## Intro

[web.dev](https://web.dev/?hl=en)ãŒå…ˆæ—¥ã€[CSS nesting improves with CSSNestedDeclarations](https://web.dev/blog/css-nesting-cssnesteddeclarations?hl=en)ã¨ã„ã†ãƒ–ãƒ­ã‚°ã‚’å…¬é–‹ã—ã¾ã—ãŸã€‚

ã“ã®ãƒ–ãƒ­ã‚°ã§ã¯ã€CSSãƒã‚¹ãƒ†ã‚£ãƒ³ã‚°ã®ä»•æ§˜ã«`CSSNestedDeclarations`ãŒè¿½åŠ ã•ã‚ŒãŸã“ã¨ã«ã¤ã„ã¦æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚æœãŸã—ã¦æ¥­å‹™ã§ã“ã®ãƒ–ãƒ­ã‚°ã§æ›¸ã‹ã‚Œã¦ã‚‹ãƒã‚°ã«å‡ºãã‚ã™ã“ã¨ã¯ãªã‹ã£ãŸæ°—ã‚‚ã—ã¾ã™ãŒã€CSSOMã®å‹•ããªã©å°‘ã—é¢ç™½ã‹ã£ãŸã®ã§æ›¸ãã“ã¨ã«ã—ã¾ã—ãŸã€‚

## è©±ã•ãªã„ã“ã¨

ã“ã®è¨˜äº‹ã§ã¯ä»¥ä¸‹ã®å†…å®¹ã«ã¤ã„ã¦ã¯æ›¸ãã¾ã›ã‚“ã€‚

- CSS nestingã¨ã¯
- CSSã®parseå‡¦ç†ã«ã¤ã„ã¦

## CSSãƒã‚¹ãƒ†ã‚£ãƒ³ã‚°ã§ã®æ—¢å­˜ã®ãƒã‚°

ã¾ãšæ—¢å­˜ã®CSSãƒã‚¹ãƒ†ã‚£ãƒ³ã‚°ã§ã‚ã£ãŸãƒã‚°ã«ã¤ã„ã¦ã§ã™ã€‚
ä»¥ä¸‹ã®ã‚ˆã†ãªCSSã‚’æ›¸ã„ãŸå ´åˆã€çš†ã•ã‚“ã¯ã©ã®ã‚ˆã†ãªUIã«ãªã‚‹ã¨æ€ã„ã¾ã™ã‹ï¼Ÿï¼Ÿ

```css
.foo {
	width: fit-content;

	@media screen and (min-width: 900px) {
		background-color: red;
	}

	background-color: green;
}
```

é–¢é€£: [github.com/yossydev/css-nesting-improves-with-cssnesteddeclarations](https://github.com/yossydev/css-nesting-improves-with-cssnesteddeclarations)

ã“ã®å ´åˆã€é©ç”¨ã•ã‚Œã‚‹background-colorã¯redğŸ›‘ã«ãªã‚Šã¾ã™ã€‚

<img src="https://github.com/user-attachments/assets/d2c31c61-c0fc-4584-a26f-ae813863db64"/>

ï¼ˆå·¦: Chrome129 / å³: Chrome130ï¼‰

ã—ã‹ã—ã€CSSã®ä»•æ§˜ã¨ã—ã¦ã¯å¾Œã‚ã«æ›¸ã‹ã‚ŒãŸã‚³ãƒ¼ãƒ‰ãŒé©ç”¨ã•ã‚Œã‚‹ã¯ãšã§ã™ã€‚ã“ã‚ŒãŒChrome 129ã¾ã§ã®CSSãƒã‚¹ãƒ†ã‚£ãƒ³ã‚°ã«é–¢ã™ã‚‹ãƒã‚°ã§ã—ãŸã€‚

## ãªãœã“ã®ã‚ˆã†ãªãƒã‚°ãŒå­˜åœ¨ã™ã‚‹ã®ã‹

ãªãœã“ã®ã‚ˆã†ãªãƒã‚°ãŒå­˜åœ¨ã—ã¦ã„ãŸã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ
ãã‚Œã¯ã€CSSOMã‚’ä½¿ã£ãŸãƒ‘ãƒ¼ã‚¹å‡¦ç†ãŒé–¢ä¿‚ã—ã¦ã„ã¾ã™ã€‚

å…ˆã»ã©ã®CSSã«å¯¾ã—ã¦ç”Ÿæˆã•ã‚ŒãŸCSSOMã‚’ã¿ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```
â†³ CSSStyleRule
  .type = STYLE_RULE
  .selectorText = ".foo"
  .resolvedSelectorText = ".foo"
  .specificity = (0,1,0)
  .style (CSSStyleDeclaration, 2) =
    - width: fit-content
    - background-color: green
  .cssRules (CSSRuleList, 1) =
    â†³ CSSMediaRule
    .type = MEDIA_RULE
    .cssRules (CSSRuleList, 1) =
      â†³ CSSStyleRule
        .type = STYLE_RULE
        .selectorText = "&"
        .resolvedSelectorText = ":is(.foo)"
        .specificity = (0,1,0)
        .style (CSSStyleDeclaration, 1) =
          - background-color: red
```

`background-color: green`ã¯`CSSStyleRule.style`ã«å«ã¾ã‚Œã¦ã„ã‚‹ã‚‚ã®ã®ã€`@media screen`ã®å¾Œã«å®šç¾©ã•ã‚ŒãŸã‹ã©ã†ã‹ã¯ã‚ã‹ã‚‰ãªã„ã§ã™ã€‚ãã®ãŸã‚ã€ãƒ‘ãƒ¼ã‚¹ã•ã‚ŒãŸCSSã‚’ã¿ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ï¼ˆå‡ºåŠ›ã•ã‚ŒãŸçµæœã‹ã‚‰è¦‹ã‚„ã™ããªã‚‹ã‚ˆã†ã«å°‘ã—æ•´å½¢ã—ã¦ã„ã¾ã™ï¼‰

```
.foo {
  width: fit-content; 
  background-color: green;

  @media screen and (min-width: 900px) {
    background-color: red;
  }
}
```

ã“ã®çµæœã€`background-color: green`ãŒ`@media screen`ã‚ˆã‚Šã‚‚ä¸Šã«æ¥ã¦ã—ã¾ã„ã¾ã—ãŸã€‚ã“ã‚Œã§ã¯CSSã®å„ªå…ˆé †ä½çš„ã«ã€`min-width: 900px`ãŒæ­£ã®æ™‚ã¯redãŒé©ç”¨ã•ã‚Œã¾ã™ã€‚

ï¼ˆãã‚‚ãã‚‚å¸¸ã«`background-color: green`ã«ã—ãŸã„ãªã‚‰`background-color: red`ã„ã‚‰ãªã„ã®ã§ã¯ï¼Ÿã¿ãŸã„ãªã”æ„è¦‹ã¯ã”ã‚‚ã£ã¨ã‚‚ã§ã™ï¼‰

## CSSNestedDeclarationsã®è¿½åŠ 

å…ˆã»ã©ã®å•é¡Œã‚’è§£æ¶ˆã™ã‚‹ãŸã‚ã«ã€CSS Working Groupã¯æ–°ã—ã[nested declarations rule](https://drafts.csswg.org/css-nesting/#nested-declarations-rule)ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚

åŒã˜CSSã®å†…å®¹ã«å¯¾ã—ã¦ã€Chrome130ã‹ã‚‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿æ§‹é€ ã«ãªã‚Šã¾ã™ã€‚

```
â†³ CSSStyleRule
  .type = STYLE_RULE
  .selectorText = ".foo"
  .resolvedSelectorText = ".foo"
  .specificity = (0,1,0)
  .style (CSSStyleDeclaration, 1) =
    - width: fit-content
  .cssRules (CSSRuleList, 2) =
    â†³ CSSMediaRule
      .type = MEDIA_RULE
      .cssRules (CSSRuleList, 1) =
        â†³ CSSNestedDeclarations
          .style (CSSStyleDeclaration, 1) =
            - background-color: red
    â†³ CSSNestedDeclarations
      .style (CSSStyleDeclaration, 1) =
        - background-color: green
```

ä»Šåº¦ã¯`CSSNestedDeclarations`ã¨ã„ã†ã‚‚ã®ãŒè¿½åŠ ã•ã‚Œã¦ã„ã‚‹ã®ãŒã‚ã‹ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚
ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ‘ãƒ¼ã‚µãƒ¼ã¯ä»¥å‰ã®å®£è¨€ã®ä½ç½®ã‚’ç¶­æŒã•ã›ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

## ã¾ã¨ã‚

ä»Šå›ã¯Chrome130ã§è¿½åŠ ã•ã‚Œã‚‹`CSSNestedDeclarations`ã«ã¤ã„ã¦ã€å°å…¥èƒŒæ™¯ã¨ä¸€ç·’ã«è¦‹ã¦ã„ãã¾ã—ãŸã€‚
CSSã®ãƒ‘ãƒ¼ã‚¹ã«ã¤ã„ã¦ã€æ­£ç›´ä»Šã¾ã§è€ƒãˆã¦é–‹ç™ºã‚’ã—ã¦ã“ãªã‹ã£ãŸã®ã§ã€ä»Šå›ã®å†…å®¹ã§èˆˆå‘³ã‚’æŒã¤ãã£ã‹ã‘ã«ãªã‚Šã¾ã—ãŸã€‚ç‰¹ã«ä»Šå›ã¯ã‚ã¾ã‚Šè§¦ã‚Œã‚‰ã‚Œã¦ã„ãªã„ã®ã§ã™ãŒã€[nested declarations rule](https://drafts.csswg.org/css-nesting/#nested-declarations-rule)ã®å…·ä½“çš„ãªå®Ÿè£…å†…å®¹ã¿ãŸã„ãªã¨ã“ã‚ã‚‚ã€æ™‚é–“ãŒã‚ã‚Œã°èª­ã‚“ã§ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚

## å‚è€ƒãƒ»é–¢é€£

- [CSS nesting improves with CSSNestedDeclarations](https://web.dev/blog/css-nesting-cssnesteddeclarations?hl=en)
- [nested declarations rule](https://drafts.csswg.org/css-nesting/#nested-declarations-rule)
