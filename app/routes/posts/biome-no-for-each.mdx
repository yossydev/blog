---
title: "BiomeãŒforEachã§ã¯ãªãfor...ofã‚’æ¨ã™ç†ç”±ã‚’å‡¦ç†é€Ÿåº¦ã®è¦³ç‚¹ã‹ã‚‰è¦‹ã‚‹"
description: "Biomeã§ã¯forEachã‚’ä½¿ç”¨ã™ã‚‹ã¨for...ofã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚ä»Šå›ã¯ãã®ç†ç”±ã«ã¤ã„ã¦ãã‚Œãã‚Œã®é€Ÿåº¦ã‚’å…ƒã«è¦‹ã¦ã„ãã¾ã™"
date: "2024/06/29"
published: true
---

## Intro

biomeã«ã¯`forEach`ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€`for...of`ã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã™ã€‚ã“ã‚Œã¯[noForEach](https://biomejs.dev/linter/rules/no-for-each/)ã¨ã„ã†recommendedãƒ«ãƒ¼ãƒ«ã«ã‚ˆã‚‹ã‚‚ã®ã§ã™ã€‚

ä»Šå›ã¯ãªãœ`for...of`ã‚’ä½¿ã†ã‚ˆã†ã«æ¨å¥¨ã—ã¦ã„ã‚‹ã®ã‹ã‚’ã€å‡¦ç†é€Ÿåº¦ã®è¦³ç‚¹ã§è¦‹ã¦ã„ãã¾ã™ã€‚

## ãŠæ–­ã‚Š

> Performance: Using forEach can lead to performance issues, especially when working with large arrays. When more requirements are added on, forEach typically gets chained with other methods like filter or map, causing multiple iterations over the same Array. Encouraging for loops discourages chaining and encourages single-iteration logic (e.g. using a continue instead of filter).

æœ¬è¨˜äº‹ã§ã‚‚å‡ºã¦ãã¾ã™ãŒã€‚noForEachã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã¯ã“ã®ã‚ˆã†ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚
ç­†è€…ã¯ä»Šå›ã®è¨˜äº‹ã§ã“ã®ã“ã¨ã«ã¤ã„ã¦ã®èª¬æ˜ã‚’ã—ã¦ã„ã‚‹ã‚ˆã†ãªã‚‚ã®ãªã®ã§ã€ãã®ä»–ã®JavaScriptã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã£ãŸæ¯”è¼ƒãªã©ã¯è¡Œã£ã¦ãªã„ã§ã™ã€‚

**ã‚ãã¾ã§ã‚‚ä»Šå›ã¯`forEach`ã¨`for...of`ã®é•ã„ã«ã¤ã„ã¦ã¨ã„ã†å†…å®¹ã§ã‚ã‚‹ã¨ã„ã†ã“ã¨ã‚’ã”ç†è§£ã„ãŸã ã‘ã‚Œã°ã¨æ€ã„ã¾ã™ğŸ™‡â€â™‚ï¸**

## Performance

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚

> Performance: Using forEach can lead to performance issues, especially when working with large arrays. When more requirements are added on, forEach typically gets chained with other methods like filter or map, causing multiple iterations over the same Array. Encouraging for loops discourages chaining and encourages single-iteration logic (e.g. using a continue instead of filter).

è¦ä»¶ãŒè¿½åŠ ã•ã‚Œã‚‹å ´åˆã€ã¤ã¾ã‚Šä½•ã‹ã—ã‚‰é…åˆ—ã®æ“ä½œã‚’è¡Œã†å¿…è¦ãŒã‚ã‚‹ã¨ãã«ã€forEachã§ã¯mapã‚„filterã‚’çµ„ã¿åˆã‚ã›ã¾ã™ãŒã€ãã‚Œã ã¨æ¯å›Arrayã«å¯¾ã—ã¦èª­ã¿è¾¼ã¿ãŒç™ºç”Ÿã—ã¦ã—ã¾ã„ã¾ã™ã€‚

ãã‚Œã«å¯¾ã—`for...of`ã§ã¯continue, breakãªã©ãŒä½¿ç”¨å‡ºæ¥ã‚‹ã®ã§ã€Arrayã‚’ä¸€åº¦èª­ã¿è¾¼ã‚€ã ã‘ã§æ¸ˆã‚€ã“ã¨ãŒã§ãã‚‹ã¨ã„ã†é•ã„ãŒã‚ã‚Šã¾ã™ã€‚

## è¨ˆæ¸¬

forEachã¨for...ofã®å®Ÿè¡Œæ™‚é–“ã‚’

- é…åˆ—ã®å€¤1ã¤1ã¤ã«å¯¾ã—ã¦å‡¦ç†ã‚’è¡Œã†ãƒ‘ã‚¿ãƒ¼ãƒ³: first.js
- é…åˆ—ã«å¯¾ã—ã¦è¿½åŠ ã®è¦ä»¶ã‚’å«ã‚ã¦å‡¦ç†ã‚’è¡Œã†ãƒ‘ã‚¿ãƒ¼ãƒ³: second.js
- é…åˆ—ã«å¯¾ã—ã¦è¿½åŠ ã®è¦ä»¶ã‚’å«ã‚ã¦å‡¦ç†ã‚’è¡Œã†ãƒ‘ã‚¿ãƒ¼ãƒ³: third.js

ã“ã®äºŒã¤ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã§è¨ˆæ¸¬ã—ã¦ã¿ã¾ã—ãŸã€‚ãƒªãƒã‚¸ãƒˆãƒªã¯[ã“ã¡ã‚‰](https://github.com/yossydev/biome-noForEach)ã«è²¼ã£ã¦ã„ã‚‹ã®ã§ã€ã‚‚ã—æ‰‹å…ƒã§å‹•ã‹ã—ã¦ã¿ãŸã„æ–¹ã¯ã©ã†ãã€‚

https://github.com/yossydev/biome-noForEach

### çµæœ

#### 1. é…åˆ—ã®å€¤ä¸€ã¤ä¸€ã¤ã«å¯¾ã—ã¦å‡¦ç†ã‚’è¡Œã†ãƒ‘ã‚¿ãƒ¼ãƒ³
```first.js
- forEach: 6.912ms
- for...of: 10.796ms
```

#### 2. é…åˆ—ã«å¯¾ã—ã¦å°‘ã—è¦ä»¶ã‚’è¿½åŠ ã—ã¦å‡¦ç†ã‚’è¡Œã†ãƒ‘ã‚¿ãƒ¼ãƒ³
```second.js
- forEach with map and filter: 20.497ms
- for...of with continue: 12.882ms
```

#### 2. é…åˆ—ã«å¯¾ã—ã¦å°‘ã—è¦ä»¶ã‚’è¿½åŠ ã—ã¦å‡¦ç†ã‚’è¡Œã†ãƒ‘ã‚¿ãƒ¼ãƒ³
```third.js
- forEach with filter and forEach: 14.519ms
- for...of with continue and break: 11.689ms
```

`1`ã§ã¯forEachã®æ–¹ãŒæ—©ã„ã‚‚ã®ã®ã€filterã‚’çµ„ã¿åˆã‚ã›ãŸ`2`ã§ã¯for...ofã®æ–¹ãŒæ—©ã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚
ã“ã‚Œã¯**è¤‡æ•°ã®ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ãƒ¼ãƒ³ãŒArrayã«å¯¾ã—ã¦ä½•åº¦ã‚‚èª­ã¿è¾¼ã¿ãŒç™ºç”Ÿã—ã¦ã—ã¾ã†**ã“ã¨ã‚ˆã‚‹å‡¦ç†é€Ÿåº¦ã®å·®ã§ã‚ã‚‹ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚

## ã¾ã¨ã‚

ç­†è€…ã¨ã—ã¦ã¯`for...of`ã®æ–¹ãŒæ˜ç¤ºçš„ã«ãªã‚‹ã®ã§ã‚³ãƒ¼ãƒ‰ãŒèª­ã¿ã‚„ã™ã„ã®ã§å¥½ãã§ã—ãŸãŒã€å‡¦ç†é€Ÿåº¦ã¨ã„ã†è¦³ç‚¹ã§ã‚‚å·®ãŒã‚ã‚‹ã“ã¨ãŒç†è§£ã§ããŸã®ã§è‰¯ã‹ã£ãŸã§ã™ã€‚

## é–¢é€£

- [https://biomejs.dev/linter/rules/no-for-each/](https://biomejs.dev/linter/rules/no-for-each/)
- [https://stackoverflow.com/a/41559281](https://stackoverflow.com/a/41559281)
- [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of)

