---
title: "Ladybirdã§ãƒ“ãƒ«ãƒ‰ã—ã¦test262ã‚’èµ°ã‚‰ã›ã‚‹ã¾ã§"
description: "å°‘ã—å‰ã«èˆˆå‘³æœ¬ä½ç¨‹åº¦ã§å™‚ã®ladybirdã‚’è§¦ã£ã¦ã¿ã¾ã—ãŸã€‚ã“ã‚Œã¯ãã®éš›ã®ãƒ¡ãƒ¢ã¿ãŸã„ãªã‚‚ã®ã§ã™ã€‚"
date: "2024/12/04"
updatedAt: "2024/12/04"
path: "lady-bird-test262"
published: true
---

[2024å¹´ ãƒ¦ã‚¦ãƒˆã®ä¸€äººã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼](https://adventar.org/calendars/9980)ã®4æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚

## Intro

å°‘ã—å‰ã«èˆˆå‘³æœ¬ä½ç¨‹åº¦ã§å™‚ã®ladybirdã‚’è§¦ã£ã¦ã¿ã¾ã—ãŸã€‚
ã“ã‚Œã¯ãã®éš›ã®è‰²ã€…ãªãƒ¡ãƒ¢çš„ãªãƒãƒªã§æ›¸ã„ã¦ã„ã¾ã™ã€‚

## ãƒ“ãƒ«ãƒ‰ã™ã‚‹

æœ¬ãƒ–ãƒ­ã‚°åŸ·ç­†æ™‚ç‚¹ï¼ˆ11/19æ™‚ç‚¹ï¼‰ã®ladybirdã¯ã€ã¾ã ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã—ã¦ã©ã“ã‹ã§é…ä¿¡ã¯ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚
ãªã®ã§æ‰‹å…ƒã§ãƒ“ãƒ«ãƒ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ãƒ“ãƒ«ãƒ‰è‡ªä½“ã¯[Ladybird browser build instructions](https://github.com/LadybirdBrowser/ladybird/blob/master/Documentation/BuildInstructionsLadybird.md)ã§ç¢ºèªã§ãã¾ã™ã€‚
ç­†è€…ã¯MacOSãªã®ã§ã€MacOSå‘ã‘ã®ãƒ“ãƒ«ãƒ‰ã¯ç°¡æ½”ã«ä»¥ä¸‹ã§ã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚

```
$ brew install autoconf autoconf-archive automake ccache cmake nasm ninja pkg-config
$ ./Meta/ladybird.sh run ladybird
```

`./Meta/ladybird.sh run ladybird`ã§åˆå›ã®ãƒ“ãƒ«ãƒ‰ã¯å¤§ä½“10åˆ†ãã‚‰ã„å¾…ã¤ã¨ã€ãƒ–ãƒ©ã‚¦ã‚¶ãŒç«‹ã¡ä¸ŠãŒã‚Šã¾ã™ã€‚
ã¾ãšã¯å€‹äººãƒ–ãƒ­ã‚°ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ç­†è€…ã®å ´åˆã¯ã‚„ã¯ã‚Šã€[yossy.dev](https://yossy.dev/)ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã—ãŸã€‚

<img src="https://github.com/user-attachments/assets/6b92de83-d22b-4e29-bf1a-ab6d8d3baded"/>

å¤šåˆ†ã¾ã æ—¥æœ¬èªã«æœªå¯¾å¿œãªã®ã‹ã€çµæ§‹æ–‡å­—åŒ–ã‘ã—ã¦ã¾ã™ã­ã€‚
çµ¶è³›é–‹ç™ºä¸­æ„ŸãŒã‚ã£ã¦å¥½ãã§ã™ã€‚

ã‚ã¨ä»¥ä¸‹ã¯ã‚ã‚‹ã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã¿ãŸã„ã§ã™ãŒã€å¤§æŠµninjaãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¦ãªã„ã“ã¨ãŒåŸå› ã‹ã¨æ€ã„ã¾ã™ã€‚

```
error: building skia:x64-linux failed with: BUILD_FAILED
Elapsed time to handle skia:x64-linux: 1.6 s

-- Running vcpkg install - failed
CMake Error at Toolchain/Tarballs/vcpkg/scripts/buildsystems/vcpkg.cmake:899 (message):
  vcpkg install failed.  See logs for more information:
  Build/release/vcpkg-manifest-install.log
Call Stack (most recent call first):
  /usr/share/cmake-3.30/Modules/CMakeDetermineSystem.cmake:146 (include)
  CMakeLists.txt:15 (project)

CMake Error: CMake was unable to find a build program corresponding to "Ninja".  
CMAKE_MAKE_PROGRAM is not set.  You probably need to select a different build tool.
-- Configuring incomplete, errors occurred!  See logs for more information:
  Build/release/vcpkg-manifest-install.log 
```

## test262ã‚’å®Ÿè¡Œã™ã‚‹

test262ã¨ã¯ãªã‚“ãªã®ã‹ã€‚ã¨ã„ã†ã®ã¯æœ¬é¡Œã§ã¯ãªã„ã®ã§çœã„ã¦ã€ç¶šãã«é€²ã¿ã¾ã™ã€‚

Ladybirdã®é¢ç™½ã„ã¨ã“ã‚ã¯åŸºæœ¬å…¨ã¦ã‚’è‡ªå‰ã§å®Ÿè£…ã—ã¦ã„ã‚‹ã¨ã“ã‚ã§ã™ã€‚

Ladybirdã®JavaScriptã‚¨ãƒ³ã‚¸ãƒ³ã¯LibJSã¨ã„ã†åå‰ã‚’ã—ã¦ãŠã‚Šã€[https://github.com/LadybirdBrowser/ladybird/tree/master/Libraries/LibJS](https://github.com/LadybirdBrowser/ladybird/tree/master/Libraries/LibJS)ã«å­˜åœ¨ã—ã¦ã„ã¾ã™ã€‚

ç­†è€…ã¯è‡ªå‰ã®JSã‚¨ãƒ³ã‚¸ãƒ³ãŒã©ã‚Œãã‚‰ã„ä½œã‚Šè¾¼ã¾ã‚Œã¦ã„ã‚‹ã®ã‹æ°—ã«ãªã£ã¦ã„ãŸã¨ã“ã‚ã€è¦ªåˆ‡ã«[https://github.com/LadybirdBrowser/libjs-test262](https://github.com/LadybirdBrowser/libjs-test262)ã¨ã„ã†ãƒªãƒã‚¸ãƒˆãƒªãŒå­˜åœ¨ã—ã¦ã„ãŠã‚Šã€ç°¡å˜ã«test262ã®ãƒã‚§ãƒƒã‚¯ãŒã§ãã¾ã™ã€‚

ã‚„ã‚Šæ–¹ã‚‚ã¨ã¦ã‚‚ç°¡å˜ã§ã€ã‚¯ãƒ­ãƒ¼ãƒ³ã‹ã‚‰å«ã‚ã‚‹ã¨ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚

```
$ git clone git@github.com:LadybirdBrowser/libjs-test262.github
$ ./Meta/ladybird.sh build test262-runner
$ virtualenv .venv
$ source .venv/bin/activate
$ pip3 install -r requirements.txt
$ ./sync-test262.sh
```

ã“ã“ã¾ã§ã¯å¤šåˆ†å•é¡Œãªã„ã¯ãšã§ã€ä»¥ä¸‹ã®ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰ã¯å°‘ã—äººã«ã‚ˆã£ã¦é•ã†ã‹ã‚‚ã—ã‚Œãªã„ã§ã™ã€‚
```
$ ./main.py --libjs-test262-runner "${LADYBIRD_SOURCE_DIR}/build/release/bin/test262-runner" --test262-root ./test262
```

`LADYBIRD_SOURCE_DIR`ã«ã¯ã€cloneã—ãŸladybirdãƒªãƒã‚¸ãƒˆãƒªã¸ã®ãƒ‘ã‚¹ã‚’çµ¶å¯¾ãƒ‘ã‚¹ã§å…¥ã‚Œã¦ãã ã•ã„ã€‚

ã¡ãªã¿ã«ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã¯ä»¥ä¸‹ã®é€šã‚Šã§æ›¸ã„ã¦ã‚ã‚Šã¾ã™ã€‚

```
$ ./main.py --libjs-test262-runner "${LADYBIRD_SOURCE_DIR}/Build/ladybird/bin/test262-runner" --test262-root ./test262
```

ç­†è€…ã®å ´åˆã€MacOSã ã‹ã‚‰ã‹ãªã®ã‹ã€ãƒ“ãƒ«ãƒ‰å†…å®¹ã®å‡ºåŠ›çµæœãŒå°‘ã—ç•°ãªã‚‹ã‚ˆã†ã§ã—ãŸã€‚

ã“ã“ã¾ã§ç„¡äº‹å‹•ã‹ã›ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒ†ã‚¹ãƒˆãŒå‹•ãã¨æ€ã„ã¾ã™

```
Found 48578.
100%|â–ˆâ–ˆâ–ˆ| 48578/48578 [00:55<00:00, 882.24tests/s, âš™ï¸=112, âš ï¸=2, âœ…=46476, âŒ=1879, ğŸ’¥ï¸=81, ğŸ“=28]]]]
Finished running tests in 0:00:55.062370.
test                            46476/48578 ( 95.67%) [ âœ… 46476 âŒ 1879  âš ï¸ 2     âš™ï¸ 112   ğŸ’¥ï¸ 81    ğŸ“ 28]
test/annexB                                                        1069/1079  ( 99.07%) [ âœ… 1069  âŒ 10]
test/annexB/built-ins                                              239/241   ( 99.17%) [ âœ… 239   âŒ 2]
test/annexB/built-ins/Array                                        1/1     (100.00%) [ âœ… 1     ]
test/annexB/built-ins/Array/from                                   1/1     (100.00%) [ âœ… 1     ]
test/annexB/built-ins/Date                                         24/24    (100.00%) [ âœ… 24    ]
test/annexB/built-ins/Date/prototype                               24/24    (100.00%) [ âœ… 24    ]
test/annexB/built-ins/Date/prototype/getYear                       7/7     (100.00%) [ âœ… 7     ]
test/annexB/built-ins/Date/prototype/setYear                       14/14    (100.00%) [ âœ… 14    ]
test/annexB/built-ins/Date/prototype/toGMTString                   3/3     (100.00%) [ âœ… 3     ]
test/annexB/built-ins/Function                                     6/6     (100.00%) [ âœ… 6     ]
test/annexB/built-ins/Object                                       1/1     (100.00%) [ âœ… 1     ]
test/annexB/built-ins/Object/is                                    1/1     (100.00%) [ âœ… 1     ]
test/annexB/built-ins/RegExp                                       60/62    ( 96.77%) [ âœ… 60    âŒ 2]                                                                                                                                                                                                   ^test/annexB/built-ins/RegExp/legacy-accessors                                      24/24    (100.00%) [ âœ… 24    ]
test/annexB/built-ins/RegExp/legacy-accessors/index                4/4     (100.00%) [ âœ… 4     ]
```

é•·ã„ã®ã§çœç•¥ã—ã¦ã¾ã™ã€‚

## ã¾ã¨ã‚

æœ¬å½“ã¯ä½•ã‹ã—ã‚‰ã‚¨ãƒ©ãƒ¼ã‚’ç›´ã™ã¾ã§ã‚’ãƒ–ãƒ­ã‚°ã«ã—ãŸã‹ã£ãŸã‚“ã§ã™ãŒã€C++ã®ç†è§£ã¨ã‚¢ãƒ‰ã‚«ãƒ¬ã‚’ã‚„ã‚Šåˆ‡ã‚ŠãŸã‹ã£ãŸã®ã§ãã‚Œã¯ã¾ãŸã®æ©Ÿä¼šã«ã€‚
æ¥å¹´ã®ä¸€ã¤ã®ç›®æ¨™ã§ã‚‚ã‚ã‚Šã¾ã™ã€‚